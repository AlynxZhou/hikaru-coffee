hikaru
======

A static site generator that generates routes based on directories naturally.
-----------------------------------------------------------------------------

- "This world won't need one more static site generator!"

- "But I need."

# Install

```
# npm i -g hikaru-coffee
```

# Code Structure

## Router

Load files and generate routes and render page and post context with templates and save files.

## Renderer

Render file contents by calling custom functions.

## Processer

Process file to context by calling custom functions.

## Generator

Generate site varibles and datas.

## Translator

Store language contents and generate translate functions.

# Data Structure

## Templates

```plain
{
  String: Data {
    "content": Function
  }
}
```

## Assets

Files that just need to copy (content is null).

## Pages

Files with a yaml front matter and layout isn't "post".

## Posts

Files with a yaml front matter and layout is "post".

## Data

Files generated by custom generator which is not rendered from a src file.

## Categories

```plain
[
  Category {
    "name"ï¼šString,
    "posts": [Post],
    "docPath": String, // Only shows after processed page with "categories" layout.
    "subs": [
      Category {
        "name": String,
        "posts": [Post],
        "docPath": String, // Only shows after processed page with "categories" layout.
        "subs": [Category]
      }
    ]
  }
]
```

## Tags

```plain
[
  Tag {
    "name": String,
    "docPath": String, // Only shows after processed page with "tags" layout.
    "posts": [Post]
  }
]
```

# TODO List

- [X] Dir based router.
- [X] Marked Markdown renderer.
- [X] Stylus CSS renderer.
- [X] Nunjucks template renderer.
- [X] Highlight.js code highlight.
- [X] Async loading, rendering and saving file.
- [X] Pagination for index, archives, categories (different category pages) and tags (different tag pages).
- [X] Archives info for templating.
- [X] Categories info for templating.
- [X] Tags info for templating.
- [X] Cheerio-based toc generating.
- [X] Cheerio-based path converting (relative to absolute).
- [X] Date operations in templates.
- [X] sprintf-js based multi-languages support.
- [X] Local search JSON gengrating.
- [X] RSS feed generating.
- [X] Porting theme ARIA.

# Example Dir Structure

```plain
hikura-site/
    |- src/ # source dir for user files
    |   |- images/
    |   |- css/
    |   |- js/
    |   |- index.md
    |   |- about/
    |   |   |- index.md
    |   |- tags/
    |   |   |- index.md
    |- doc/ # source will be render to here
    |   |- images/
    |   |   |- logo.png
    |   |- css/
    |   |   |- index.css
    |   |- js/
    |   |   |- index.js
    |   |- index.html
    |   |- index-2.html # page 2 of index
    |   |- index-3.html # page 3 of index
    |   |- about/
    |   |   |- index.html
    |   |- tags/
    |   |   |- index.html # layout: tags
    |   |   |- tag-1/
    |   |   |   |- index.html # automatically generated, layout: tag
    |   |   |   |- index-2.html # page 2 of tag-1
    |- themes/
    |   |- aria/
    |   |   |- src/ # this will be render to doc/
    |   |   |   |- layout.njk # templates
    |   |   |   |- index.njk
    |   |   |   |- tags.njk
    |   |   |   |- tag.njk
    |   |   |   |- page.njk # if no layout specific, fallback to this
    |   |   |   |- css/
    |   |   |   |   |- index.styl
    |   |   |   |- js/
    |   |   |   |   |- index.js
    |   |   |   |- images/
    |   |   |   |   |- logo.png
    |   |- README.md
```
